!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.PromiseQueue=e()}(this,function(){"use strict";function n(n){return n&&"[object Function]"===Object.prototype.toString.call(n)}var e=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}();return function(){function o(n){if(e(this,o),this._queue=[],this._pause=!1,(n=Object.assign({concurrency:1/0},n)).concurrency<1)throw new TypeError("Expected `concurrency` to be a integer which is bigger than 0");this._ongoingCount=0,this._concurrency=n.concurrency,this._resolveEmpty=function(){}}return t(o,[{key:"_next",value:function(){this._pause||(this._ongoingCount--,this._queue.length>0?this._queue.shift()():this._resolveEmpty())}},{key:"pause",value:function(){this._pause=!0}},{key:"resume",value:function(){this._pause=!1,this._next()}},{key:"add",value:function(e){var t=this;if(function(n){return n&&"[object Array]"===Object.prototype.toString.call(n)}(e)&&e.every(n))return e.length>1?this.add(e.shift()).add(e):this.add(e[0]);if(n(e))return new Promise(function(n,o){var r=function(){t._ongoingCount++,e().then(function(e){n(e),t._next()},function(n){o(n),t._next()})};t._ongoingCount<t._concurrency&&!t._pause?r():t._queue.push(r)}),this;throw new TypeError("Expected `arg` in add(arg) must be a function which return a Promise, or an array of function which return a Promise")}},{key:"size",get:function(){return this._queue.length}},{key:"ongoing",get:function(){return this._ongoingCount}}]),o}()});
//# sourceMappingURL=PromiseQueue.js.map
