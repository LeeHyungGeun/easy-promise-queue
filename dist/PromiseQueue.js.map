{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///PromiseQueue.js","webpack:///webpack/bootstrap fb005a0b4c57314b42f3","webpack:///./src/PromiseQueue.js"],"names":["root","factory","exports","module","define","amd","PromiseQueue","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","opts","_queue","assign","concurrency","Infinity","_pendingCount","_concurrency","_resolveEmpty","shift","fn","_this","Promise","resolve","reject","run","then","val","_next","err","push","get","size","default"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAAI,aAAAL,IAEAD,EAAAM,aAAAL,KACCM,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAR,OAGA,IAAAC,GAAAQ,EAAAD,IACAR,WACAU,GAAAF,EACAG,UAUA,OANAL,GAAAE,GAAAI,KAAAX,EAAAD,QAAAC,IAAAD,QAAAO,GAGAN,EAAAU,UAGAV,EAAAD,QAvBA,GAAAS,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDgBM,SAASN,EAAQD,EAASO,GAE/BN,EAAOD,QAAUO,EAAoB,IAKhC,SAASN,EAAQD,GAEtB,YAQA,SAASgB,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHC,OAAOC,eAAerB,EAAS,cAC7BsB,UAGF,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,eAAqBD,EAAWE,gBAAyB,SAAWF,KAAYA,EAAWG,aAAiBZ,OAAOC,eAAeI,EAAQI,EAAWI,IAAKJ,IAAiB,MAAO,UAAUX,EAAagB,EAAYC,GAAiJ,MAA9HD,IAAYV,EAAiBN,EAAYkB,UAAWF,GAAiBC,GAAaX,EAAiBN,EAAaiB,GAAqBjB,MErE3hBd,EFyEc,WExElB,QAAAA,GAAaiC,GAOX,GAPiBrB,EAAAX,KAAAD,GACjBC,KAAKiC,UAELD,EAAOjB,OAAOmB,QACZC,YAAaC,KACZJ,GAECA,EAAKG,YAAc,EACrB,KAAM,IAAIrB,WAAU,sDAGtBd,MAAKqC,cAAgB,EACrBrC,KAAKsC,aAAeN,EAAKG,YACzBnC,KAAKuC,cAAgB,aF8HtB,MAhDArB,GAAanB,IACX6B,IAAK,QACLX,MAAO,WE3ERjB,KAAKqC,gBAEDrC,KAAKiC,OAAOV,OAAS,EACvBvB,KAAKiC,OAAOO,UAEZxC,KAAKuC,mBFgFNX,IAAK,MACLX,MAAO,SE7ELwB,GAAI,GAAAC,GAAA1C,IACP,OAAO,IAAI2C,SAAQ,SAACC,EAASC,GAC3B,GAAMC,GAAM,WACVJ,EAAKL,gBAELI,IAAKM,KACH,SAAAC,GACEJ,EAAQI,GACRN,EAAKO,SAEP,SAAAC,GACEL,EAAOK,GACPR,EAAKO,UAKPP,GAAKL,cAAgBK,EAAKJ,aAC5BQ,IAEAJ,EAAKT,OAAOkB,KAAKL,QFiFpBlB,IAAK,OACLwB,IAAK,WE5EN,MAAOpD,MAAKiC,OAAOoB,QFgFlBzB,IAAK,UACLwB,IAAK,WE7EN,MAAOpD,MAAKqC,kBFkFNtC,IAGTJ,GAAQ2D,QEjFMvD","file":"PromiseQueue.js?fe0caa7aff939cce8fae","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PromiseQueue\"] = factory();\n\telse\n\t\troot[\"PromiseQueue\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PromiseQueue\"] = factory();\n\telse\n\t\troot[\"PromiseQueue\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar PromiseQueue = function () {\n\t  function PromiseQueue(opts) {\n\t    _classCallCheck(this, PromiseQueue);\n\t\n\t    this._queue = [];\n\t\n\t    opts = Object.assign({\n\t      concurrency: Infinity\n\t    }, opts);\n\t\n\t    if (opts.concurrency < 1) {\n\t      throw new TypeError('Expected `concurrency` to be a number from 1 and up');\n\t    }\n\t\n\t    this._pendingCount = 0;\n\t    this._concurrency = opts.concurrency;\n\t    this._resolveEmpty = function () {};\n\t  }\n\t\n\t  _createClass(PromiseQueue, [{\n\t    key: '_next',\n\t    value: function _next() {\n\t      this._pendingCount--;\n\t\n\t      if (this._queue.length > 0) {\n\t        this._queue.shift()();\n\t      } else {\n\t        this._resolveEmpty();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'add',\n\t    value: function add(fn) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var run = function run() {\n\t          _this._pendingCount++;\n\t\n\t          fn().then(function (val) {\n\t            resolve(val);\n\t            _this._next();\n\t          }, function (err) {\n\t            reject(err);\n\t            _this._next();\n\t          });\n\t        };\n\t\n\t        if (_this._pendingCount < _this._concurrency) {\n\t          run();\n\t        } else {\n\t          _this._queue.push(run);\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'size',\n\t    get: function get() {\n\t      return this._queue.size;\n\t    }\n\t  }, {\n\t    key: 'pending',\n\t    get: function get() {\n\t      return this._pendingCount;\n\t    }\n\t  }]);\n\t\n\t  return PromiseQueue;\n\t}();\n\t\n\texports.default = PromiseQueue;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// PromiseQueue.js?fe0caa7aff939cce8fae"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fb005a0b4c57314b42f3","class PromiseQueue {\n  constructor (opts) {\n    this._queue = [];\n\n    opts = Object.assign({\n      concurrency: Infinity,\n    }, opts);\n\n    if (opts.concurrency < 1) {\n      throw new TypeError('Expected `concurrency` to be a number from 1 and up');\n    }\n\n    this._pendingCount = 0;\n    this._concurrency = opts.concurrency;\n    this._resolveEmpty = () => {\n    };\n  }\n\n  _next () {\n    this._pendingCount--;\n\n    if (this._queue.length > 0) {\n      this._queue.shift()();\n    } else {\n      this._resolveEmpty();\n    }\n  }\n\n  add (fn) {\n    return new Promise((resolve, reject) => {\n      const run = () => {\n        this._pendingCount++;\n\n        fn().then(\n          val => {\n            resolve(val);\n            this._next();\n          },\n          err => {\n            reject(err);\n            this._next();\n          }\n        );\n      };\n\n      if (this._pendingCount < this._concurrency) {\n        run();\n      } else {\n        this._queue.push(run);\n      }\n    });\n  }\n\n  get size () {\n    return this._queue.size;\n  }\n\n  get pending () {\n    return this._pendingCount;\n  }\n}\n\nexport default PromiseQueue;\n\n\n// WEBPACK FOOTER //\n// ./src/PromiseQueue.js"],"sourceRoot":""}